import{m as S,n as b,r as c,v,o as m,p as j,j as r,q as _}from"./main-CSGYlYcv.js";import{B as k}from"./button-DGTpoL1x.js";function C(t){return S({select:e=>e.location})}function R(t){const e=b();return o=>{const n=e.buildLocation({to:"/tanstack-sudoku/sudoku/$sudokuId/$sudokuProgress",params:{sudokuId:t,sudokuProgress:o}}).pathname;e.history.push(n)}}const $=t=>{const e=C();c.useEffect(()=>{const n=e.pathname.split("/"),i=n.at(-1),l=n.at(-2);if(!(!i||!l||i.length!==81||l.length!==81)&&v(l,i))try{const d=m(i);t(d)}catch(d){console.error(d)}},[e])};function B(t,e){const o=m(t),n=e?m(e):null,i=R(t),[l,d]=c.useState(n??o);return $(d),{grid:l,setCellValue:(s,u,a)=>{const p=l.map((w,g)=>w.map((f,y)=>g===s&&y===u?a:f));d(p),i(j(p))},initialGrid:o,isInitial:(s,u,a)=>o[s][u]!==0&&o[s][u]===a,setGrid:d}}const N=({rowIndex:t,colIndex:e,value:o,onChange:n,isDisabled:i,onFocus:l})=>r.jsx("input",{className:`w-8 h-8 text-xl sm:w-12 sm:h-12 md:w-16 md:h-16 lg:w-22 lg:h-22 sm:text-2xl md:text-4xl lg:text-6xl box-border text-center border-2 font-bold border-sudoku-border ${i&&"bg-sudoku-background"}`,id:`${t}${e}`,type:"text",inputMode:"numeric",autoComplete:"off",disabled:i,maxLength:1,value:o,onChange:n,onFocus:l}),I=({sudokuId:t,sudokuProgress:e})=>{const{grid:o,setCellValue:n,isInitial:i}=B(t,e),[l,d]=c.useState(),x=(h,s,u)=>{const a=h.target.value;a.length>1||!/^[0-9]?$/.test(a)||n(s,u,Number(a))};return r.jsx(r.Fragment,{children:r.jsx("div",{id:"tanstack-sudoku",className:"inline-flex flex-col",children:o.map((h,s)=>r.jsx("div",{className:`flex flex-row w-auto ${s%3===0?"border-t-2 border-t-sudoku-outer-border ":""}${s%3===2?"border-b-2 border-b-sudoku-outer-border ":""}`,children:h.map((u,a)=>r.jsx("div",{className:`${a%3===0?"border-l-2 border-l-sudoku-outer-border ":""}${a%3===2?"border-r-2 border-r-sudoku-outer-border ":""}`,children:r.jsx(N,{rowIndex:s,colIndex:a,value:u===0?"":u.toString(),onChange:p=>x(p,s,a),onFocus:()=>{d({rowIndex:s,colIndex:a})},isDisabled:i(s,a,u)})},`${s}${a}`))},s))})})},F=()=>{const t=b(),[e]=c.useState(t.history.location.pathname),[o,n]=c.useState(t.history.location.state.__TSR_index),i=c.useCallback(()=>{t.history.back()},[t.history]),l=c.useCallback(()=>{t.history.forward(),t.history.location.state.__TSR_index>o&&n(t.history.location.state.__TSR_index)},[t.history.location.state.__TSR_index]),d=()=>{const s=t.history.location.state.__TSR_index;return s>o&&n(t.history.location.state.__TSR_index),s<o},x=c.useCallback(()=>t.history.location.pathname===e||!t.history.canGoBack(),[t.history.location]);return{isForwardDisabled:c.useCallback(()=>!d(),[d,t.history]),isBackwardDisabled:x,handleBackward:i,handleForward:l}},G=()=>{const{isForwardDisabled:t,isBackwardDisabled:e,handleBackward:o,handleForward:n}=F();return r.jsxs("div",{className:"flex justify-center gap-4",children:[r.jsx(k,{variant:"default",size:"icon",disabled:e(),onClick:o,children:r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",className:"lucide lucide-undo-icon lucide-undo",children:[r.jsx("path",{d:"M3 7v6h6"}),r.jsx("path",{d:"M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13"})]})}),r.jsx(k,{variant:"default",size:"icon",disabled:t(),onClick:n,children:r.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",className:"lucide lucide-redo-icon lucide-redo",children:[r.jsx("path",{d:"M21 7v6h-6"}),r.jsx("path",{d:"M3 17a9 9 0 0 1 9-9 9 9 0 0 1 6 2.3l3 2.7"})]})})]})},D=function(){const{sudokuId:e,sudokuProgress:o}=_.useParams();return r.jsxs("div",{className:"flex flex-col justify-center gap-2",children:[r.jsx(G,{}),r.jsx(I,{sudokuId:e,sudokuProgress:o})]})};export{D as component};
