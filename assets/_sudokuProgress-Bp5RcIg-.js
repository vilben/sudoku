import{u as w,c as m,r as l,v as S,i as b,p as _,j as i,S as C,d as R,e as $,f as j}from"./main-Cs5vmzzh.js";function F(t){return w({select:e=>e.location})}function I(t){const e=m();return s=>{const o=e.buildLocation({to:"/tanstack-sudoku/sudoku/$sudokuId/$sudokuProgress",params:{sudokuId:t,sudokuProgress:s}}).pathname;e.history.push(o)}}const N=t=>{const e=F();l.useEffect(()=>{const o=e.pathname.split("/"),a=o.at(-1),d=o.at(-2);if(!(!a||!d||a.length!==81||d.length!==81)&&S(d,a))try{const c=b(a);t(c)}catch(c){console.error(c)}},[e])};function B(t,e){const s=b(t),o=e?b(e):null,a=I(t),[d,c]=l.useState(o??s);return N(c),{grid:d,setCellValue:(r,u,n)=>{const g=d.map((v,f)=>v.map((y,k)=>f===r&&k===u?n:y));c(g),a(_(g))},initialGrid:s,isInitial:(r,u,n)=>s[r][u]!==0&&s[r][u]===n,setGrid:c}}const G=({rowIndex:t,colIndex:e,value:s,onChange:o,isDisabled:a,onFocus:d})=>i.jsx("input",{className:`w-8 h-8 text-xl sm:w-12 sm:h-12 md:w-16 md:h-16 lg:w-24 lg:h-24 sm:text-2xl md:text-4xl lg:text-6xl box-border text-center border-2 font-bold border-gray-500 ${a&&"bg-gray-300"}`,id:`${t}${e}`,type:"text",inputMode:"numeric",autoComplete:"off",disabled:a,maxLength:1,value:s,onChange:o,onFocus:d}),z=({sudokuId:t,sudokuProgress:e})=>{const{grid:s,setCellValue:o,isInitial:a}=B(t,e),[d,c]=l.useState(),x=(h,r,u)=>{const n=h.target.value;n.length>1||!/^[0-9]?$/.test(n)||o(r,u,Number(n))};return i.jsx(i.Fragment,{children:i.jsx("div",{id:"tanstack-sudoku",className:"inline-flex flex-col",children:s.map((h,r)=>i.jsx("div",{className:`flex flex-row w-auto ${r%3===0?"border-t-2 border-t-gray-300 ":""}${r%3===2?"border-b-2 border-b-gray-300 ":""}`,children:h.map((u,n)=>i.jsx("div",{className:`${n%3===0?"border-l-2 border-l-gray-300 ":""}${n%3===2?"border-r-2 border-r-gray-300 ":""}`,children:i.jsx(G,{rowIndex:r,colIndex:n,value:u===0?"":u.toString(),onChange:g=>x(g,r,n),onFocus:()=>{c({rowIndex:r,colIndex:n})},isDisabled:a(r,n,u)})},`${r}${n}`))},r))})})},P=$("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function p({className:t,variant:e,size:s,asChild:o=!1,...a}){const d=o?C:"button";return i.jsx(d,{"data-slot":"button",className:R(P({variant:e,size:s,className:t})),...a})}const T=()=>{const t=m(),[e]=l.useState(t.history.location.pathname),[s,o]=l.useState(t.history.location.state.__TSR_index),a=l.useCallback(()=>{t.history.back()},[t.history]),d=l.useCallback(()=>{t.history.forward(),t.history.location.state.__TSR_index>s&&o(t.history.location.state.__TSR_index)},[t.history.location.state.__TSR_index]),c=()=>{const r=t.history.location.state.__TSR_index;return r>s&&o(t.history.location.state.__TSR_index),r<s},x=l.useCallback(()=>t.history.location.pathname===e||!t.history.canGoBack(),[t.history.location]);return{isForwardDisabled:l.useCallback(()=>!c(),[c,t.history]),isBackwardDisabled:x,handleBackward:a,handleForward:d}},D=()=>{const{isForwardDisabled:t,isBackwardDisabled:e,handleBackward:s,handleForward:o}=T();return i.jsxs("div",{className:"flex",children:[i.jsx(p,{disabled:e(),onClick:s,children:"Back"}),i.jsx(p,{disabled:t(),onClick:o,children:"Forward"})]})},V=function(){const{sudokuId:e,sudokuProgress:s}=j.useParams();return i.jsxs("div",{className:"flex flex-col justify-center",children:[i.jsx(D,{}),i.jsx(z,{sudokuId:e,sudokuProgress:s})]})};export{V as component};
